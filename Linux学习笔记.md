# linux学习笔记


### [Linux基本目录结构](#Linux基本目录结构)

### [3.1 远程登录Linux系统](./课程笔记/3.1远程登录Linux系统.md)

### [3.2 vi和vim编辑器](./课程笔记/3.2vi和vim编辑器.md)

### [3.3 关机、重启和用户登录注销](./课程笔记/3.3关机、重启和用户登录注销.md)

### [3.4 用户管理](./课程笔记/3.4用户管理.md)

### [3.5 实用指令](./课程笔记/3.5实用指令.md)

### [3.6 组管理和权限管理](./课程笔记/3.6组管理和权限管理.md)

### [3.7 定时任务调度](./课程笔记/3.7定时任务调度.md)

### [3.8 Linux磁盘分区、挂载](./课程笔记/3.8Linux磁盘分区、挂载度.md)

### [3.9 网络配置](./课程笔记/3.9网络配置.md)

### [3.10 进程管理(重点)](./课程笔记/3.10进程管理.md)

### [3.11 包管理工具(RPM和YUM)](./课程笔记/3.11包管理工具(RPM和YUM).md)

### 4. 拓展篇

* 这部分内容主要是实践操作，根据官方文档操作试着操作吧

#### [4.1 搭建JAVAEE环境](./课程笔记/4.1搭建JAVAEE环境.md)

#### [4.2 开发平台Ubuntu](./课程笔记/4.2开发平台Ubuntu.md)

### 5. Shell编程篇

#### [5.1 Shell基础](./shell编程/5.1Shell简介.md)

#### [5.2 Shell变量](./shell编程/5.2Shell变量.md)

#### [5.3 Shell字符串](./shell编程/5.3Shell字符串.md)

#### [5.4 Shell数组](./shell编程/5.4Shell数组.md)

#### [5.5 Shell运算符](./shell编程/5.5Shell运算符.md)

#### [5.6 Shell打印输出指令](./shell编程/5.6Shell打印输出命令.md)

#### [5.7 Shell test命令](./shell编程/5.7Shelltest命令.md)

#### [5.8 Shell流程控制](./shell编程/5.8Shell流程控制.md)

#### [5.9 Shell函数](./shell编程/5.9Shell函数.md)

#### [5.10 输入输出重定向](./shell编程/5.10输入输出重定向.md)

#### [5.11 shell文件包含](./shell编程/5.11shell文件包含.md)



# Linux基本目录结构


## 1. 目录用途

* /bin：        是Binary的缩写，这个目录存放着最经常使用的命令。
* /sbin：       s就是Super User的意思，这里存放的是系统管理员使用的系统管理程序。
* /home：       存放普通用户的主目录，在Linux中每个用户都有一个自己的目录，一般该目录名是以用户的账号命名的。
* /root：       该目录为系统管理员，也称作超级权限者的用户主目录。
* /lib：        系统开机所需要最基本的动态连接共享库，其作用类似于Windows里的DLL文件。几乎所有的应用程序都需要用到这些共享库。
* /lost+found： 这个目录一般情况下是空的，当系统非法关机后，这里就存放了一些文件。
* /etc：        所有的系统管理所需要的配置文件和子目录my.conf。
* /usr/local：  这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似与windows下的program files目录。
* /boot：       存放的是启动Linux时使用的一些核心文件，包括一些连接文件以及镜像文件。
* /proc：       这个目录是一个虚拟的目录，它是系统内存的映射，访问这个目录来获取系统信息。
* /srv：        service的缩写，该目录存放一些服务启动之后需要提供的数据。
* /sys：        这是linux2.6内核的一个很大的变化。该目录下安装了2.6内核中新出现的一个文件系统sysfs。
* /tmp：        这个目录是用来存放一些临时文件的。
* /dev：        类似windows的设备管理器，把所有的硬件用文件的形式存储。
* /media：      linux系统会自动识别一些设备，例如U盘光驱等等，当识别后，linux会把识别的设备挂载到这个目录下。
* /mnt：        系统提供该目录是为了让用户临时挂载别的文件系统的，我们可以将外部的存储挂载在/mnt/上，然后进入该目录就可以查看里面的内容了。
* /opt：        这是给主机额外安装软件所摆放的目录，如安装ORACLE数据库就可放到该目录下。默认为空。
* /usr/local：  这是另一个给主机额外安装软件所安装的目录，一般是通过编译源码的方式安装的程序。
* /var：        这个目录中存放着在不断扩充着的东西，习惯将经常被修改的目录放在这个目录下，包括各种日志文件。
* /selinux：    SELinux是一种安全子系统，它能控制程序只能访问特定文件。

## 2. 总结

1. Linux的目录中有且只有一个根目录。
2. Linux的各个目录存放的内容是规划好，不用乱放文件。
3. Linux是以文件的形式管理我们的设备，因此linux系统，一切皆为文件。
4. Linux的各个文件目录下存放什么内容，必须有一个认识。



# 进程管理

## 1. 进程管理基础

* 在Linux中，每个执行的**程序（代码）**都称为一个进程。每个进程都分配一个ID号
* 每一个进程，都会对应一个父进程，而这个父进程可以复制多个子进程。例如www服务器。
* 每个进程都可能以两种方式存在。前台和后台。
  * 前台进程：用户目前的屏幕上可以进行操作的。
  * 后台进程：实际在操作，但由于屏幕上无法看到的进程，通常使用后台方式执行。
* 一般系统的服务都是以后台进程的方式存在，而且都会常驻在系统中，直到关机才结束。

## 2. 显示系统执行的进程

### 2.1 ps指令详细介绍

> ps [选项]：查看目前系统中，有哪些正在执行，以及它们执行的状况

* ps -a：显示当前终端的所有进程信息。
* ps -u：以用户的格式显示进程信息。
* ps -x：显示后台进程运行的参数。
* ps -axu | grep xxx：过滤得到xxx的信息。
* ps -ef：以全格式显示当前所有的进程，查看进程的父进程。
* -e：显示所有进程。
* -f：全格式。

> ps -axu显示信息选项

![3.10ps显示信息说明.jpg](../imgs/3/3.10ps显示信息说明.jpg)

> System V 展示风格

字段|说明
---|---
USER|用户说明
PID|进程识别号
%CPU|进程占用cpu百分比
%MEM|进程占用物理内存百分比
VSZ|进程占用虚拟内存大小(KB)
RSS|进程占用物理内存大小(KB)
TTY|终端机号
STAT|进程状态，S睡眠，s代表是会话的先导进程，N代表进程拥有比普通进程更高的优先级，R正在运行，D短期等待，Z僵死进程，T被跟踪或被停止
STARTED|进程启动的时间
TIME|此进程所消耗的CPU时间
COMMAND|正在执行的命令或进程名

> ps -ef显示信息解释

![3.9psef.png](../imgs/3/3.9psef.png)

> BSD展示风格

字段|说明
---|---
UID|用户id
PID|进程id
PPID|父进程
C|CPU用于执行优先级的因子，数值越大，表明cpu密集型运算，执行优先级会降低，数值越小，表明是I/O密集运算，执行优先级会提高
STIME|进程启动时间
TTY|终端机号
TIME|此进程所消耗的CPU时间
CMD|启动所用的命令和参数

## 3. 终止进程

> 若是某个进程执行一半需要停止时，或是消耗了很大的系统资源时，此时可以考虑停止该进程，使用kill命令来完成此任务

* kill [选项] 进程号：通过进程号杀死进程
  * -9：表示强迫进程立刻停止
* killall 进程名称：通过进程名称杀死进程，也支持通配符，这在系统因负载过大而变得很慢时很有用

> 案例1：踢掉某个非法用户

![3.10案例1](../imgs/3/3.10案例1.jpg)

> 案例2：终止远程服务

![3.10案例2](../imgs/3/3.10案例2.jpg)

> 案例3：终止多个gedit编辑器

![3.10案例3](../imgs/3/3.10案例3.jpg)

> 案例4： 强制沙雕一个终端

![3.10案例4](../imgs/3/3.10案例4.jpg)

## 4. 查看进程树

* 查看进程树：pstree [选项]
  * -p：显示进程的PID
  * -u：显示进程的所属用户

## 5. 服务(Service)管理

> 服务(Service)本质就是进程，但是是运行在后台的，通常都会监听某个端口，等待其它程序的请求，比如(mysql,sshd 防火墙等),因此我们又称为守护进程。

![3.10服务说明](../imgs/3/3.10服务说明.jpg)

### 5.1 service管理指令

> service管理指令：service 服务名 [start | stop | restart | reload | status]
> 在CentOS7.0之后，不再使用service，而是systemctl

* 查看防火墙情况：
  * service iptables status
  * systemctl status firewalld（7.0之后的版本）
![3.10打开关闭防火墙.jpg](../imgs/3/3.10打开关闭防火墙.jpg)

* 测试某个端口是否在监听：telnet

### 5.2 服务查看方式

* 方式1：setup指令
![3.10查看系统服务.jpg](../imgs/3/3.10查看系统服务.jpg)
* 方式2：ls -l /etc/init.d/

### 5.3 服务的运行级别（runlevel）

* 查看或修改默认级别：vim /etc/inittab
* 每个服务对应的每个运行级别都可以设置
[详细见3.5实用指令第一部分](3.5实用指令.md)

### 5.4 开机流程

![3.10开机流程](../imgs/3/3.10开机流程.png)

### 5.5 chkconfig指令

> chkconfig：可以给每个服务的各个运行级别设置自启动/关闭

#### 5.5.1 基本语法

* 查看xxx服务：chkconfig –list | grep xxx
* 查看服务的状态：chkconfig 服务名 --list
* 给服务的运行级别设置自启动：chkconfig –level 5 服务名 on/off
* 要所有运行级别关闭或开启：chkconfig 服务名 on/off
* **chkconfig重新设置后需要重新启动才能生效**

## 6. 动态监控进程

> top与ps相似，都是用来显示正在执行的进程，top的不同之处在于top执行一段时间可以更新正在运行的进程

### 6.1 基本语法

> top [选项]
>
>* -d 秒数：指定top命令每隔几秒更新。默认是3秒。
>* -i：使top不显示任何闲置或者僵死进程。
>* -p：通过指定监控进程ID来仅仅监控某个进程的状态。

* 交互操作说明：

操作|功能
---|---
P|以CPU使用率排序，默认就是此项
M|以内存的使用率排序
N|以PID排序
q|退出top

>动态进程监控图例

![3.10动态进程监控图例](../imgs/3/3.10动态进程监控图例.jpg)

### 6.2 应用案例

#### 6.2.1  监控特定用户

1. top查看进程；
2. u
3. 输入用户名。

#### 6.2.2 终止指定的进程

1. top查看进程；
2. k输入要结束的进程。

## 7. 查看网络情况

### 7.1 基本语法

> netstat [选项]
>
> * -an：按一定顺序排列输出
> * -p：显示哪个进程在调用

### 7.2 应用案例

1. 查看所有的网络服务
    * netstat -anp | more

2. 查看sshd的服务的信息
    * netstat -anp | grep sshd



